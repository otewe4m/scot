<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body id="content">
 <script type="text/javascript" charset="utf-8" async defer>
 	

$(document).ready(function () {
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    const page = getQueryParam('webid');
    const pageName = page ? `${page}.html` : 'main.html';

    $('#content').load(pageName, function (response, status, xhr) {
        if (status === "error") {
            console.warn(`Failed to load ${pageName}: ${xhr.status} ${xhr.statusText}`);
            $('#content').load('main.html', function (response, status, xhr) {
                if (status === "error") {
                    $('#content').html('Failed to load default page: ' + xhr.status + ' ' + xhr.statusText);
                }
            });
        } else {
            // Find and execute all <script> tags in the loaded content
            $('#content').find('script').each(function () {
                const script = document.createElement("script");
                script.text = this.textContent || this.innerText;
                document.head.appendChild(script); // Append to <head> to execute
                document.head.removeChild(script); // Clean up to avoid duplication
            });
        }
    });
});

 </script>
